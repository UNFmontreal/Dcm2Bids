
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="This is the documentation for dcm2bids, a community-centered project that aims to be an easy-to-use tool to automate the process of 1- converting DICOM files to NIfTI files with dcm2niix and 2- reorganising NIfTI files into the Brain Imaging Data Structure (BIDS).">
      
      
      
        <link rel="canonical" href="https://UNFmontreal.github.io/Dcm2Bids/3.1/tutorial/parallel/">
      
      
        <link rel="prev" href="../first-steps/">
      
      
        <link rel="next" href="../../how-to/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.18">
    
    
      
        <title>Multiple participants in parallel - dcm2bids documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.26e3688c.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/timeago.css">
    
      <link rel="stylesheet" href="../../assets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#tutorial-convert-multiple-participants-in-parallel" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
  You're not viewing the latest stable version.
  <a href="../../..">


    <strong>Click here to go to latest stable.</strong>
  </a>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="dcm2bids documentation" class="md-header__button md-logo" aria-label="dcm2bids documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            dcm2bids documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Multiple participants in parallel
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
            
              <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18V6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-2.69L23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69Z"/></svg>
              </label>
            
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
            
              <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-2.69L23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69Z"/></svg>
              </label>
            
          
        </form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/UNFmontreal/Dcm2Bids" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    UNFmontreal/dcm2bids
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="dcm2bids documentation" class="md-nav__button md-logo" aria-label="dcm2bids documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    dcm2bids documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/UNFmontreal/Dcm2Bids" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    UNFmontreal/dcm2bids
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../get-started/">Get started</a>
          
            <label for="__nav_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Get started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../get-started/install/" class="md-nav__link">
        Installation
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../">Tutorials</a>
          
            <label for="__nav_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Tutorials
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../first-steps/" class="md-nav__link">
        First steps
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Multiple participants in parallel
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Multiple participants in parallel
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#motivation" class="md-nav__link">
    Motivation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
    <nav class="md-nav" aria-label="Prerequisites">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setup" class="md-nav__link">
    Setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verify-dcm2bids-and-parallel-version" class="md-nav__link">
    Verify dcm2bids and parallel version
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-scaffold" class="md-nav__link">
    Create scaffold
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#populate-the-sourcedata-directory" class="md-nav__link">
    Populate the sourcedata directory
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get-your-config-file-ready-and-test-it" class="md-nav__link">
    Get your config file ready and test it
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-parallel" class="md-nav__link">
    Running parallel
  </a>
  
    <nav class="md-nav" aria-label="Running parallel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#from-a-single-subject-to-several-at-once" class="md-nav__link">
    From a single subject to several at once
  </a>
  
    <nav class="md-nav" aria-label="From a single subject to several at once">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#understanding-how-parallel-works" class="md-nav__link">
    Understanding how parallel works
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extracting-participant-id-with-parallel" class="md-nav__link">
    Extracting participant ID with parallel
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#building-the-dcm2bids-command-with-parallel" class="md-nav__link">
    Building the dcm2bids command with parallel
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#launching-parallel" class="md-nav__link">
    Launching parallel
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verifying-the-logs" class="md-nav__link">
    Verifying the logs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../how-to/">How-to guides</a>
          
            <label for="__nav_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          How-to guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/get-help/" class="md-nav__link">
        Get help and support
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/use-main-commands/" class="md-nav__link">
        Use main commands
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/create-config-file/" class="md-nav__link">
        Create a config file
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/use-advanced-commands/" class="md-nav__link">
        Use advanced commands
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/contributing/" class="md-nav__link">
        Contribute to dcm2bids
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../changelog/">Changelog</a>
          
            <label for="__nav_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Changelog
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../upgrade/" class="md-nav__link">
        How to upgrade
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../dcm2bids" class="md-nav__link">
        API Reference
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../code_of_conduct/" class="md-nav__link">
        Code of conduct
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#motivation" class="md-nav__link">
    Motivation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
    <nav class="md-nav" aria-label="Prerequisites">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setup" class="md-nav__link">
    Setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verify-dcm2bids-and-parallel-version" class="md-nav__link">
    Verify dcm2bids and parallel version
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-scaffold" class="md-nav__link">
    Create scaffold
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#populate-the-sourcedata-directory" class="md-nav__link">
    Populate the sourcedata directory
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get-your-config-file-ready-and-test-it" class="md-nav__link">
    Get your config file ready and test it
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-parallel" class="md-nav__link">
    Running parallel
  </a>
  
    <nav class="md-nav" aria-label="Running parallel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#from-a-single-subject-to-several-at-once" class="md-nav__link">
    From a single subject to several at once
  </a>
  
    <nav class="md-nav" aria-label="From a single subject to several at once">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#understanding-how-parallel-works" class="md-nav__link">
    Understanding how parallel works
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extracting-participant-id-with-parallel" class="md-nav__link">
    Extracting participant ID with parallel
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#building-the-dcm2bids-command-with-parallel" class="md-nav__link">
    Building the dcm2bids command with parallel
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#launching-parallel" class="md-nav__link">
    Launching parallel
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verifying-the-logs" class="md-nav__link">
    Verifying the logs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/UNFmontreal/Dcm2Bids/blob/master/tutorial/parallel.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/UNFmontreal/Dcm2Bids/raw/master/tutorial/parallel.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.15 8.15 0 0 1-1.23-2Z"/></svg>
    </a>
  


<h1 id="tutorial-convert-multiple-participants-in-parallel">Tutorial - Convert multiple participants in parallel<a class="headerlink" href="#tutorial-convert-multiple-participants-in-parallel" title="Permanent link">âš“ï¸Ž</a></h1>
<h2 id="motivation">Motivation<a class="headerlink" href="#motivation" title="Permanent link">âš“ï¸Ž</a></h2>
<p>Instead of manually converting one participant after the other, one could be
tempted to speed up the process. There are many ways to speed up the process and
using <a href="https://www.gnu.org/software/parallel/">GNU parallel</a> is one of them. <a href="https://www.gnu.org/software/parallel/">GNU parallel</a> provides
an intuitive and concise syntax, making it user-friendly even for those with
limited programming experience, just like dcm2bids ðŸ˜„. By utilizing multiple
cores simultaneously, <a href="https://www.gnu.org/software/parallel/">GNU parallel</a> significantly speeds up the
conversion process, saving time and resources. In sum, by using <a href="https://www.gnu.org/software/parallel/">GNU
parallel</a>, we can quickly and easily convert our data with minimal
effort and maximum productivity.</p>
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">âš“ï¸Ž</a></h2>
<p>Before proceeding with this tutorial, there are a few things you need to have in
place:</p>
<ul>
<li>Be familiar with <code>dcm2bids</code> or, at least, have followed the
  <a href="../first-steps">First steps tutorial</a>;</li>
<li>Have a <a href="../../how-to/create-config-file/">dcm2bids config file</a> ready or know how to make one;</li>
<li>Have more than one participant's data to convert;</li>
<li>Each participant's DICOM files should be organized into separate directories
  or archives.</li>
<li>Since version <strong>3.1.0</strong>, <code>dcm2bids</code> can use compressed archives or
    directories as input, it doesn't matter.</li>
</ul>
<h3 id="setup">Setup<a class="headerlink" href="#setup" title="Permanent link">âš“ï¸Ž</a></h3>
<div class="admonition warning">
<p class="admonition-title">dcm2bids and GNU parallel must be installed</p>
<p>If you have not installed dcm2bids yet, now is the time to go to the
<a href="../../get-started/install/">installation page</a> and install dcm2bids with its
dependencies. This tutorial does not cover the installation part and assumes
you have dcm2bids properly installed.</p>
<p><a href="https://www.gnu.org/software/parallel/">GNU parallel</a> may be already installed
on your computer. If you can't run the command <code>parallel</code>, you can download it on
<a href="https://www.gnu.org/software/parallel/">their website</a>. Note that if you installed
dcm2bids in a <strong>conda environment</strong> you can also install parallel in it through the
conda-forge channel. Once your env is activated, run <code>conda install -c conda-forge parallel</code>
to install it.</p>
</div>
<h3 id="verify-dcm2bids-and-parallel-version">Verify dcm2bids and parallel version<a class="headerlink" href="#verify-dcm2bids-and-parallel-version" title="Permanent link">âš“ï¸Ž</a></h3>
<p>First thing first, let's make sure our software are usable.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Command</label><label for="__tabbed_1_2">Output</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>dcm2bids<span class="w"> </span>-v
parallel<span class="w"> </span>--version
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="o">(</span>dcm2bids<span class="o">)</span><span class="w"> </span>sam:~$<span class="w"> </span>dcm2bids<span class="w"> </span>-v
dcm2bids<span class="w"> </span>version:<span class="w">       </span><span class="m">3</span>.1.0
Based<span class="w"> </span>on<span class="w"> </span>BIDS<span class="w"> </span>version:<span class="w">  </span>v1.8.0
<span class="o">(</span>dcm2bids<span class="o">)</span><span class="w"> </span>sam:~$<span class="w"> </span>parallel<span class="w"> </span>--version
GNU<span class="w"> </span>parallel<span class="w"> </span><span class="m">20230722</span>
Copyright<span class="w"> </span><span class="o">(</span>C<span class="o">)</span><span class="w"> </span><span class="m">2007</span>-2023<span class="w"> </span>Ole<span class="w"> </span>Tange,<span class="w"> </span>http://ole.tange.dk<span class="w"> </span>and<span class="w"> </span>Free<span class="w"> </span>Software
Foundation,<span class="w"> </span>Inc.
License<span class="w"> </span>GPLv3+:<span class="w"> </span>GNU<span class="w"> </span>GPL<span class="w"> </span>version<span class="w"> </span><span class="m">3</span><span class="w"> </span>or<span class="w"> </span>later<span class="w"> </span>&lt;https://gnu.org/licenses/gpl.html&gt;
This<span class="w"> </span>is<span class="w"> </span>free<span class="w"> </span>software:<span class="w"> </span>you<span class="w"> </span>are<span class="w"> </span>free<span class="w"> </span>to<span class="w"> </span>change<span class="w"> </span>and<span class="w"> </span>redistribute<span class="w"> </span>it.
GNU<span class="w"> </span>parallel<span class="w"> </span>comes<span class="w"> </span>with<span class="w"> </span>no<span class="w"> </span>warranty.

Web<span class="w"> </span>site:<span class="w"> </span>https://www.gnu.org/software/parallel

When<span class="w"> </span>using<span class="w"> </span>programs<span class="w"> </span>that<span class="w"> </span>use<span class="w"> </span>GNU<span class="w"> </span>Parallel<span class="w"> </span>to<span class="w"> </span>process<span class="w"> </span>data<span class="w"> </span><span class="k">for</span><span class="w"> </span>publication
please<span class="w"> </span>cite<span class="w"> </span>as<span class="w"> </span>described<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s1">&#39;parallel --citation&#39;</span>.
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>If you don't see a similar output, it is likely an installation issue or the
software were not added to your system's PATH. This allows you to easily execute
dcm2bids commands without specifying the full path to the executables. If you
are using a virtual env or conda env, make sure it is <em>activated</em>.</p>
<h2 id="create-scaffold">Create scaffold<a class="headerlink" href="#create-scaffold" title="Permanent link">âš“ï¸Ž</a></h2>
<p>We will first use the <code>dcm2bids_scaffold</code> command to create basic BIDS files and
directories. It is based on the material provided by the <a href="https://bids-standard.github.io/bids-starter-kit/">BIDS starter
kit</a>. This ensures we have a valid BIDS structure to start
with.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Command</label><label for="__tabbed_2_2">Output</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>dcm2bids_scaffold<span class="w"> </span>-o<span class="w"> </span>name_of_your_bids_dir
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="o">(</span>dcm2bids<span class="o">)</span><span class="w"> </span>sam:~$<span class="w"> </span>dcm2bids_scaffold<span class="w"> </span>-o<span class="w"> </span>tuto-parallel
INFO<span class="w">    </span><span class="p">|</span><span class="w"> </span>---<span class="w"> </span>dcm2bids_scaffold<span class="w"> </span>start<span class="w"> </span>---
INFO<span class="w">    </span><span class="p">|</span><span class="w"> </span>Running<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span>command:<span class="w"> </span>/home/sam/miniconda3/envs/dcm2bids/bin/dcm2bids_scaffold<span class="w"> </span>-o<span class="w"> </span>tuto-parallel
INFO<span class="w">    </span><span class="p">|</span><span class="w"> </span>OS<span class="w"> </span>version:<span class="w"> </span>Linux-5.15.0-83-generic-x86_64-with-glibc2.31
INFO<span class="w">    </span><span class="p">|</span><span class="w"> </span>Python<span class="w"> </span>version:<span class="w"> </span><span class="m">3</span>.10.4<span class="w"> </span><span class="p">|</span><span class="w"> </span>packaged<span class="w"> </span>by<span class="w"> </span>conda-forge<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="o">(</span>main,<span class="w"> </span>Mar<span class="w"> </span><span class="m">24</span><span class="w"> </span><span class="m">2022</span>,<span class="w"> </span><span class="m">17</span>:39:04<span class="o">)</span><span class="w"> </span><span class="o">[</span>GCC<span class="w"> </span><span class="m">10</span>.3.0<span class="o">]</span>
INFO<span class="w">    </span><span class="p">|</span><span class="w"> </span>dcm2bids<span class="w"> </span>version:<span class="w"> </span><span class="m">3</span>.1.0
INFO<span class="w">    </span><span class="p">|</span><span class="w"> </span>Checking<span class="w"> </span><span class="k">for</span><span class="w"> </span>software<span class="w"> </span>update
INFO<span class="w">    </span><span class="p">|</span><span class="w"> </span>Currently<span class="w"> </span>using<span class="w"> </span>the<span class="w"> </span>latest<span class="w"> </span>version<span class="w"> </span>of<span class="w"> </span>dcm2bids.
INFO<span class="w">    </span><span class="p">|</span><span class="w"> </span>The<span class="w"> </span>files<span class="w"> </span>used<span class="w"> </span>to<span class="w"> </span>create<span class="w"> </span>your<span class="w"> </span>BIDS<span class="w"> </span>directory<span class="w"> </span>were<span class="w"> </span>taken<span class="w"> </span>from<span class="w"> </span>https://github.com/bids-standard/bids-starter-kit.

INFO<span class="w">    </span><span class="p">|</span><span class="w"> </span>Tree<span class="w"> </span>representation<span class="w"> </span>of<span class="w"> </span>tuto-parallel/
INFO<span class="w">    </span><span class="p">|</span><span class="w"> </span>tuto-parallel/
INFO<span class="w">    </span><span class="p">|</span><span class="w"> </span>â”œâ”€â”€<span class="w"> </span>code/
INFO<span class="w">    </span><span class="p">|</span><span class="w"> </span>â”œâ”€â”€<span class="w"> </span>derivatives/
INFO<span class="w">    </span><span class="p">|</span><span class="w"> </span>â”œâ”€â”€<span class="w"> </span>sourcedata/
INFO<span class="w">    </span><span class="p">|</span><span class="w"> </span>â”œâ”€â”€<span class="w"> </span>tmp_dcm2bids/
INFO<span class="w">    </span><span class="p">|</span><span class="w"> </span>â”‚<span class="w">   </span>â””â”€â”€<span class="w"> </span>log/
INFO<span class="w">    </span><span class="p">|</span><span class="w"> </span>â”‚<span class="w">       </span>â””â”€â”€<span class="w"> </span>scaffold_20230913-095334.log
INFO<span class="w">    </span><span class="p">|</span><span class="w"> </span>â”œâ”€â”€<span class="w"> </span>.bidsignore
INFO<span class="w">    </span><span class="p">|</span><span class="w"> </span>â”œâ”€â”€<span class="w"> </span>CHANGES
INFO<span class="w">    </span><span class="p">|</span><span class="w"> </span>â”œâ”€â”€<span class="w"> </span>dataset_description.json
INFO<span class="w">    </span><span class="p">|</span><span class="w"> </span>â”œâ”€â”€<span class="w"> </span>participants.json
INFO<span class="w">    </span><span class="p">|</span><span class="w"> </span>â”œâ”€â”€<span class="w"> </span>participants.tsv
INFO<span class="w">    </span><span class="p">|</span><span class="w"> </span>â””â”€â”€<span class="w"> </span>README
INFO<span class="w">    </span><span class="p">|</span><span class="w"> </span>Log<span class="w"> </span>file<span class="w"> </span>saved<span class="w"> </span>at<span class="w"> </span>tuto-parallel/tmp_dcm2bids/log/scaffold_20230913-095334.log
INFO<span class="w">    </span><span class="p">|</span><span class="w"> </span>---<span class="w"> </span>dcm2bids_scaffold<span class="w"> </span>end<span class="w"> </span>---
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<h2 id="populate-the-sourcedata-directory">Populate the <code>sourcedata</code> directory<a class="headerlink" href="#populate-the-sourcedata-directory" title="Permanent link">âš“ï¸Ž</a></h2>
<p>This step is optional but it makes things easier when all the data are within
the same directory. The <code>sourcedata</code> directory is meant to contain your DICOM
files. It doesn't mean you have to duplicate your files there but it is nice to
<a href="https://en.wikipedia.org/wiki/Symbolic_link">symlink</a> them there. That being
said, feel free to let your DICOM directories wherever they are, and use that
as an input to your dcm2bids command.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">Command</label><label for="__tabbed_3_2">Output</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>ln<span class="w"> </span>-s<span class="w"> </span>TARGET<span class="w"> </span>DIRECTORY
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="o">(</span>dcm2bids<span class="o">)</span><span class="w"> </span>sam:~/tuto-parallel$<span class="w"> </span>ln<span class="w"> </span>-s<span class="w"> </span><span class="nv">$HOME</span>/data/punk_proj/<span class="w"> </span>sourcedata/
<span class="o">(</span>dcm2bids<span class="o">)</span><span class="w"> </span>sam:~/tuto-parallel$<span class="w"> </span>tree<span class="w"> </span>sourcedata/
sourcedata/
â””â”€â”€<span class="w"> </span>punk_proj<span class="w"> </span>-&gt;<span class="w"> </span>/home/sam/data/punk_proj/

<span class="m">1</span><span class="w"> </span>directory,<span class="w"> </span><span class="m">0</span><span class="w"> </span>files
<span class="o">(</span>dcm2bids<span class="o">)</span><span class="w"> </span>sam:~/tuto-parallel$<span class="w"> </span>ls<span class="w"> </span>-1<span class="w"> </span>sourcedata/punk_proj/
PUNK041.tar.bz2
PUNK042.tar.bz2
PUNK043.tar.bz2
PUNK044.tar.bz2
PUNK045.tar.bz2
PUNK046.tar.bz2
PUNK047.tar.bz2
PUNK048.tar.bz2
PUNK049.tar.bz2
PUNK050.tar.bz2
PUNK051.tar.bz2
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Now that I can access all the <em>punk</em> subjects from within the <code>sourcedata</code> as
<code>sourcedata/punk_proj/</code> points to its target.</p>
<h2 id="get-your-config-file-ready-and-test-it">Get your config file ready and test it<a class="headerlink" href="#get-your-config-file-ready-and-test-it" title="Permanent link">âš“ï¸Ž</a></h2>
<p>You can either run <code>dcm2bids_helper</code> to help build your config file or import
one if your already have one. The config file is necessary for specifying the
conversion parameters and mapping the metadata from DICOM to BIDS format.</p>
<p>Because the tutorial is about <code>parallel</code>, I simply copied a config file I
created for my data to <code>code/config_dcm2bids_t1w.json</code>. This config file aims to
<strong>BIDSify</strong> and <strong>deface</strong> T1w found for each participant.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">config_dcm2bids_t1w.json</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;post_op&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;cmd&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;pydeface --outfile dst_file src_file&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;datatype&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;anat&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;suffix&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;T1w&quot;</span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;custom_entities&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;rec-defaced&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;descriptions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;datatype&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;anat&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;suffix&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;T1w&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;criteria&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;SeriesDescription&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;anat_T1w&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Make sure that your config file runs successfully on one participant at least
before moving onto parallelizing.</p>
<p>In my case,
<code>dcm2bids --auto_extract_entities -c code/config_dcm2bids_t1w.json -d sourcedata/punk_proj/PUNK041.tar.bz2 -p 041</code>
ran without any problem.</p>
<h2 id="running-parallel">Running parallel<a class="headerlink" href="#running-parallel" title="Permanent link">âš“ï¸Ž</a></h2>
<p>Running pydeface takes quite a long time to run on a single participant. Instead
of running participant serially as with a <code>for loop</code>, <code>parallel</code> can be used to
run as many as your machine can at once.</p>
<h3 id="from-a-single-subject-to-several-at-once">From a single subject to several at once<a class="headerlink" href="#from-a-single-subject-to-several-at-once" title="Permanent link">âš“ï¸Ž</a></h3>
<p>If you have never heard of parallel, here's how the maintainers describes the
tool:</p>
<blockquote>
<p>GNU parallel is a shell tool for executing jobs in parallel using one or more
computers. A job can be a single command or a small script that has to be run
for each of the lines in the input. The typical input is a list of files, a
list of hosts, a list of users, a list of URLs, or a list of tables. A job can
also be a command that reads from a pipe. GNU parallel can then split the
input and pipe it into commands in parallel.</p>
</blockquote>
<h4 id="understanding-how-parallel-works">Understanding how parallel works<a class="headerlink" href="#understanding-how-parallel-works" title="Permanent link">âš“ï¸Ž</a></h4>
<p>In order to use parallel, we have to give it a list of our subjects we want to
convert. You can generate this list by hand, in a text file or through a first
command that you will pipe to parallel.</p>
<p>Here's a basic example to list all the punk_proj participants and run <code>echo</code> on
each of them.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">Command</label><label for="__tabbed_4_2">Output</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>ls<span class="w"> </span>PATH/TO/YOUR/SOURCE/DATA<span class="w"> </span><span class="p">|</span><span class="w"> </span>parallel<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;This is the command for subject {}&quot;</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="o">(</span>dcm2bids<span class="o">)</span><span class="w"> </span>sam:~/tuto-parallel$<span class="w"> </span>ls<span class="w"> </span>sourcedata/punk_proj<span class="w"> </span><span class="p">|</span><span class="w"> </span>parallel<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;This is the command for subject {}&quot;</span>
This<span class="w"> </span>is<span class="w"> </span>the<span class="w"> </span><span class="nb">command</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>subject<span class="w"> </span>PUNK041.tar.bz2
This<span class="w"> </span>is<span class="w"> </span>the<span class="w"> </span><span class="nb">command</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>subject<span class="w"> </span>PUNK042.tar.bz2
This<span class="w"> </span>is<span class="w"> </span>the<span class="w"> </span><span class="nb">command</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>subject<span class="w"> </span>PUNK043.tar.bz2
This<span class="w"> </span>is<span class="w"> </span>the<span class="w"> </span><span class="nb">command</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>subject<span class="w"> </span>PUNK044.tar.bz2
This<span class="w"> </span>is<span class="w"> </span>the<span class="w"> </span><span class="nb">command</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>subject<span class="w"> </span>PUNK045.tar.bz2
This<span class="w"> </span>is<span class="w"> </span>the<span class="w"> </span><span class="nb">command</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>subject<span class="w"> </span>PUNK046.tar.bz2
This<span class="w"> </span>is<span class="w"> </span>the<span class="w"> </span><span class="nb">command</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>subject<span class="w"> </span>PUNK047.tar.bz2
This<span class="w"> </span>is<span class="w"> </span>the<span class="w"> </span><span class="nb">command</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>subject<span class="w"> </span>PUNK048.tar.bz2
This<span class="w"> </span>is<span class="w"> </span>the<span class="w"> </span><span class="nb">command</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>subject<span class="w"> </span>PUNK049.tar.bz2
This<span class="w"> </span>is<span class="w"> </span>the<span class="w"> </span><span class="nb">command</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>subject<span class="w"> </span>PUNK050.tar.bz2
This<span class="w"> </span>is<span class="w"> </span>the<span class="w"> </span><span class="nb">command</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>subject<span class="w"> </span>PUNK051.tar.bz2
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>However, if you want to do something with the files, you have to be more
specific, otherwise the program won't find the file because the relative path is
not specified as shown below. However, keep in mind that having just the
filenames is also worth it as they contains really important information that we
will need, namely the participant ID. We will eventually extract it.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">Command</label><label for="__tabbed_5_2">Output</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>ls<span class="w"> </span>PATH/TO/YOUR/SOURCE/DATA<span class="w"> </span><span class="p">|</span><span class="w"> </span>parallel<span class="w"> </span>ls<span class="w"> </span><span class="o">{}</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="o">(</span>dcm2bids<span class="o">)</span><span class="w"> </span>sam:~/tuto-parallel$<span class="w"> </span>ls<span class="w"> </span>sourcedata/punk_proj<span class="w"> </span><span class="p">|</span><span class="w"> </span>parallel<span class="w"> </span>ls<span class="w"> </span><span class="o">{}</span>
ls:<span class="w"> </span>cannot<span class="w"> </span>access<span class="w"> </span><span class="s1">&#39;PUNK041.tar.bz2&#39;</span>:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
ls:<span class="w"> </span>cannot<span class="w"> </span>access<span class="w"> </span><span class="s1">&#39;PUNK042.tar.bz2&#39;</span>:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
ls:<span class="w"> </span>cannot<span class="w"> </span>access<span class="w"> </span><span class="s1">&#39;PUNK043.tar.bz2&#39;</span>:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
ls:<span class="w"> </span>cannot<span class="w"> </span>access<span class="w"> </span><span class="s1">&#39;PUNK044.tar.bz2&#39;</span>:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
ls:<span class="w"> </span>cannot<span class="w"> </span>access<span class="w"> </span><span class="s1">&#39;PUNK045.tar.bz2&#39;</span>:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
ls:<span class="w"> </span>cannot<span class="w"> </span>access<span class="w"> </span><span class="s1">&#39;PUNK046.tar.bz2&#39;</span>:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
ls:<span class="w"> </span>cannot<span class="w"> </span>access<span class="w"> </span><span class="s1">&#39;PUNK047.tar.bz2&#39;</span>:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
ls:<span class="w"> </span>cannot<span class="w"> </span>access<span class="w"> </span><span class="s1">&#39;PUNK048.tar.bz2&#39;</span>:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
ls:<span class="w"> </span>cannot<span class="w"> </span>access<span class="w"> </span><span class="s1">&#39;PUNK049.tar.bz2&#39;</span>:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
ls:<span class="w"> </span>cannot<span class="w"> </span>access<span class="w"> </span><span class="s1">&#39;PUNK050.tar.bz2&#39;</span>:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
ls:<span class="w"> </span>cannot<span class="w"> </span>access<span class="w"> </span><span class="s1">&#39;PUNK051.tar.bz2&#39;</span>:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>You can solve this by simply adding the path to the ls command (e.g.,
<code>ls sourcedata/punk_proj/*</code>) or by using the parallel <code>:::</code> as input source:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="6:2"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><input id="__tabbed_6_2" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">Command</label><label for="__tabbed_6_2">Output</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>parallel<span class="w"> </span>ls<span class="w"> </span><span class="o">{}</span><span class="w"> </span>:::<span class="w"> </span>PATH/TO/YOUR/SOURCE/DATA/*
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="o">(</span>dcm2bids<span class="o">)</span><span class="w"> </span>sam:~/tuto-parallel$<span class="w"> </span>parallel<span class="w"> </span>ls<span class="w"> </span><span class="o">{}</span><span class="w"> </span>:::<span class="w"> </span>sourcedata/punk_proj/*
sourcedata/punk_proj/PUNK041.tar.bz2
sourcedata/punk_proj/PUNK042.tar.bz2
sourcedata/punk_proj/PUNK043.tar.bz2
sourcedata/punk_proj/PUNK044.tar.bz2
sourcedata/punk_proj/PUNK045.tar.bz2
sourcedata/punk_proj/PUNK046.tar.bz2
sourcedata/punk_proj/PUNK047.tar.bz2
sourcedata/punk_proj/PUNK048.tar.bz2
sourcedata/punk_proj/PUNK049.tar.bz2
sourcedata/punk_proj/PUNK050.tar.bz2
sourcedata/punk_proj/PUNK051.tar.bz2
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<h3 id="extracting-participant-id-with-parallel">Extracting participant ID with parallel<a class="headerlink" href="#extracting-participant-id-with-parallel" title="Permanent link">âš“ï¸Ž</a></h3>
<p>Depending on how standardized your participants' directory name are, you may
have spend a little bit of time figuring out the best way to extract the
participant ID from the directory name. This means you might have to read the
parallel help pages to dig through examples to find your case scenario.</p>
<p>If you are lucky, all the names are already standardized in addition to being
BIDS-compliant already.</p>
<p>In my case, I can use the <code>--plus</code> flag directly in parallel to extract the
alphanum pattern I wanted to keep by using <code>{/..}</code> (basename only) or a perl
expression to perform string replacements. Another common case if you want only
the digit from file names (or compressed archives without number) would be to
use <code>{//[^0-9]/}</code>.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="7:2"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><input id="__tabbed_7_2" name="__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="__tabbed_7_1">Command</label><label for="__tabbed_7_2">Output</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>parallel<span class="w"> </span>--plus<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>data<span class="w"> </span>path:<span class="w"> </span><span class="o">{}</span><span class="w"> </span>and<span class="w"> </span>fullname<span class="w"> </span>ID:<span class="w"> </span><span class="o">{</span>/..<span class="o">}</span><span class="w"> </span>VS<span class="w"> </span>digit-only<span class="w"> </span>ID:<span class="w"> </span><span class="s2">&quot;{= s/.*\\/YOUR_PATTERN_BEFORE_ID//; s/TRAILING_PATH_TO_BE_REMOVED// =}&quot;</span><span class="w"> </span>:::<span class="w"> </span>PATH/TO/YOUR/SOURCE/DATA/*
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="o">(</span>dcm2bids<span class="o">)</span><span class="w"> </span>sam:~/tuto-parallel$<span class="w"> </span>parallel<span class="w"> </span>--plus<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>data<span class="w"> </span>path:<span class="w"> </span><span class="o">{}</span><span class="w"> </span>and<span class="w"> </span>fullname<span class="w"> </span>ID:<span class="w"> </span><span class="o">{</span>/..<span class="o">}</span><span class="w"> </span>VS<span class="w"> </span>digit-only<span class="w"> </span>ID:<span class="w"> </span><span class="s2">&quot;{= s/.*\\/PUNK//; s/.tar.*// =}&quot;</span><span class="w"> </span>:::<span class="w"> </span>sourcedata/punk_proj/*
data<span class="w"> </span>path:<span class="w"> </span>sourcedata/punk_proj/PUNK041.tar.bz2<span class="w"> </span>and<span class="w"> </span>fullname<span class="w"> </span>ID:<span class="w"> </span>PUNK041<span class="w"> </span>VS<span class="w"> </span>digit-only<span class="w"> </span>ID:<span class="w"> </span><span class="m">041</span>
data<span class="w"> </span>path:<span class="w"> </span>sourcedata/punk_proj/PUNK042.tar.bz2<span class="w"> </span>and<span class="w"> </span>fullname<span class="w"> </span>ID:<span class="w"> </span>PUNK042<span class="w"> </span>VS<span class="w"> </span>digit-only<span class="w"> </span>ID:<span class="w"> </span><span class="m">042</span>
data<span class="w"> </span>path:<span class="w"> </span>sourcedata/punk_proj/PUNK043.tar.bz2<span class="w"> </span>and<span class="w"> </span>fullname<span class="w"> </span>ID:<span class="w"> </span>PUNK043<span class="w"> </span>VS<span class="w"> </span>digit-only<span class="w"> </span>ID:<span class="w"> </span><span class="m">043</span>
data<span class="w"> </span>path:<span class="w"> </span>sourcedata/punk_proj/PUNK044.tar.bz2<span class="w"> </span>and<span class="w"> </span>fullname<span class="w"> </span>ID:<span class="w"> </span>PUNK044<span class="w"> </span>VS<span class="w"> </span>digit-only<span class="w"> </span>ID:<span class="w"> </span><span class="m">044</span>
data<span class="w"> </span>path:<span class="w"> </span>sourcedata/punk_proj/PUNK045.tar.bz2<span class="w"> </span>and<span class="w"> </span>fullname<span class="w"> </span>ID:<span class="w"> </span>PUNK045<span class="w"> </span>VS<span class="w"> </span>digit-only<span class="w"> </span>ID:<span class="w"> </span><span class="m">045</span>
data<span class="w"> </span>path:<span class="w"> </span>sourcedata/punk_proj/PUNK046.tar.bz2<span class="w"> </span>and<span class="w"> </span>fullname<span class="w"> </span>ID:<span class="w"> </span>PUNK046<span class="w"> </span>VS<span class="w"> </span>digit-only<span class="w"> </span>ID:<span class="w"> </span><span class="m">046</span>
data<span class="w"> </span>path:<span class="w"> </span>sourcedata/punk_proj/PUNK047.tar.bz2<span class="w"> </span>and<span class="w"> </span>fullname<span class="w"> </span>ID:<span class="w"> </span>PUNK047<span class="w"> </span>VS<span class="w"> </span>digit-only<span class="w"> </span>ID:<span class="w"> </span><span class="m">047</span>
data<span class="w"> </span>path:<span class="w"> </span>sourcedata/punk_proj/PUNK048.tar.bz2<span class="w"> </span>and<span class="w"> </span>fullname<span class="w"> </span>ID:<span class="w"> </span>PUNK048<span class="w"> </span>VS<span class="w"> </span>digit-only<span class="w"> </span>ID:<span class="w"> </span><span class="m">048</span>
data<span class="w"> </span>path:<span class="w"> </span>sourcedata/punk_proj/PUNK049.tar.bz2<span class="w"> </span>and<span class="w"> </span>fullname<span class="w"> </span>ID:<span class="w"> </span>PUNK049<span class="w"> </span>VS<span class="w"> </span>digit-only<span class="w"> </span>ID:<span class="w"> </span><span class="m">049</span>
data<span class="w"> </span>path:<span class="w"> </span>sourcedata/punk_proj/PUNK050.tar.bz2<span class="w"> </span>and<span class="w"> </span>fullname<span class="w"> </span>ID:<span class="w"> </span>PUNK050<span class="w"> </span>VS<span class="w"> </span>digit-only<span class="w"> </span>ID:<span class="w"> </span><span class="m">050</span>
data<span class="w"> </span>path:<span class="w"> </span>sourcedata/punk_proj/PUNK051.tar.bz2<span class="w"> </span>and<span class="w"> </span>fullname<span class="w"> </span>ID:<span class="w"> </span>PUNK051<span class="w"> </span>VS<span class="w"> </span>digit-only<span class="w"> </span>ID:<span class="w"> </span><span class="m">051</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<h3 id="building-the-dcm2bids-command-with-parallel">Building the dcm2bids command with parallel<a class="headerlink" href="#building-the-dcm2bids-command-with-parallel" title="Permanent link">âš“ï¸Ž</a></h3>
<p>Once we know how to extract the participant ID, all we have left to do is to
build the command that will be used in parallel. One easy way to build our
command is to use the <code>--dry-run</code> flag.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="8:2"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio" /><input id="__tabbed_8_2" name="__tabbed_8" type="radio" /><div class="tabbed-labels"><label for="__tabbed_8_1">Command</label><label for="__tabbed_8_2">Output</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>parallel<span class="w"> </span>--dry-run<span class="w"> </span>--plus<span class="w"> </span>dcm2bids<span class="w"> </span>--auto_extract_entities<span class="w"> </span>-c<span class="w"> </span>path/to/your/config.json<span class="w"> </span>-d<span class="w"> </span><span class="o">{}</span><span class="w"> </span>-p<span class="w"> </span><span class="s2">&quot;{= s/.*\\/YOUR_PATTERN_BEFORE_ID//; s/TRAILING_PATH_TO_BE_REMOVED// =}&quot;</span><span class="w"> </span>:::<span class="w"> </span>PATH/TO/YOUR/SOURCE/DATA/*
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="o">(</span>dcm2bids<span class="o">)</span><span class="w"> </span>sam:~/tuto-parallel$<span class="w"> </span>parallel<span class="w"> </span>--dry-run<span class="w"> </span>--plus<span class="w"> </span>dcm2bids<span class="w"> </span>--auto_extract_entities<span class="w"> </span>-c<span class="w"> </span>code/config_dcm2bids_t1w.json<span class="w"> </span>-d<span class="w"> </span><span class="o">{}</span><span class="w"> </span>-p<span class="w"> </span><span class="s2">&quot;{= s/.*\\/PUNK//; s/.tar.*// =}&quot;</span><span class="w"> </span>:::<span class="w"> </span>sourcedata/punk_proj/*
dcm2bids<span class="w"> </span>--auto_extract_entities<span class="w"> </span>-c<span class="w"> </span>code/config_dcm2bids_t1w.json<span class="w"> </span>-d<span class="w"> </span>sourcedata/punk_proj/PUNK041.tar.bz2<span class="w"> </span>-p<span class="w"> </span><span class="m">041</span>
dcm2bids<span class="w"> </span>--auto_extract_entities<span class="w"> </span>-c<span class="w"> </span>code/config_dcm2bids_t1w.json<span class="w"> </span>-d<span class="w"> </span>sourcedata/punk_proj/PUNK042.tar.bz2<span class="w"> </span>-p<span class="w"> </span><span class="m">042</span>
dcm2bids<span class="w"> </span>--auto_extract_entities<span class="w"> </span>-c<span class="w"> </span>code/config_dcm2bids_t1w.json<span class="w"> </span>-d<span class="w"> </span>sourcedata/punk_proj/PUNK043.tar.bz2<span class="w"> </span>-p<span class="w"> </span><span class="m">043</span>
dcm2bids<span class="w"> </span>--auto_extract_entities<span class="w"> </span>-c<span class="w"> </span>code/config_dcm2bids_t1w.json<span class="w"> </span>-d<span class="w"> </span>sourcedata/punk_proj/PUNK044.tar.bz2<span class="w"> </span>-p<span class="w"> </span><span class="m">044</span>
dcm2bids<span class="w"> </span>--auto_extract_entities<span class="w"> </span>-c<span class="w"> </span>code/config_dcm2bids_t1w.json<span class="w"> </span>-d<span class="w"> </span>sourcedata/punk_proj/PUNK045.tar.bz2<span class="w"> </span>-p<span class="w"> </span><span class="m">045</span>
dcm2bids<span class="w"> </span>--auto_extract_entities<span class="w"> </span>-c<span class="w"> </span>code/config_dcm2bids_t1w.json<span class="w"> </span>-d<span class="w"> </span>sourcedata/punk_proj/PUNK046.tar.bz2<span class="w"> </span>-p<span class="w"> </span><span class="m">046</span>
dcm2bids<span class="w"> </span>--auto_extract_entities<span class="w"> </span>-c<span class="w"> </span>code/config_dcm2bids_t1w.json<span class="w"> </span>-d<span class="w"> </span>sourcedata/punk_proj/PUNK047.tar.bz2<span class="w"> </span>-p<span class="w"> </span><span class="m">047</span>
dcm2bids<span class="w"> </span>--auto_extract_entities<span class="w"> </span>-c<span class="w"> </span>code/config_dcm2bids_t1w.json<span class="w"> </span>-d<span class="w"> </span>sourcedata/punk_proj/PUNK048.tar.bz2<span class="w"> </span>-p<span class="w"> </span><span class="m">048</span>
dcm2bids<span class="w"> </span>--auto_extract_entities<span class="w"> </span>-c<span class="w"> </span>code/config_dcm2bids_t1w.json<span class="w"> </span>-d<span class="w"> </span>sourcedata/punk_proj/PUNK049.tar.bz2<span class="w"> </span>-p<span class="w"> </span><span class="m">049</span>
dcm2bids<span class="w"> </span>--auto_extract_entities<span class="w"> </span>-c<span class="w"> </span>code/config_dcm2bids_t1w.json<span class="w"> </span>-d<span class="w"> </span>sourcedata/punk_proj/PUNK050.tar.bz2<span class="w"> </span>-p<span class="w"> </span><span class="m">050</span>
dcm2bids<span class="w"> </span>--auto_extract_entities<span class="w"> </span>-c<span class="w"> </span>code/config_dcm2bids_t1w.json<span class="w"> </span>-d<span class="w"> </span>sourcedata/punk_proj/PUNK051.tar.bz2<span class="w"> </span>-p<span class="w"> </span><span class="m">051</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<h3 id="launching-parallel">Launching parallel<a class="headerlink" href="#launching-parallel" title="Permanent link">âš“ï¸Ž</a></h3>
<p>Once you are sure that the dry-run is what you would like to run, you simply
have to remove the <code>--dry-run</code> flag and go for walk since the wait time may be
long, especially if pydeface has to run.</p>
<p>If you want to see what is happening, you can add the <code>--verbose</code> flag to the
parallel command so you will see what jobs are currently running.</p>
<p>Parallel will try to use as much cores as it can by default. If you need to
limit the number of jobs to be parallelize, you can do so by using the
<code>--jobs &lt;number&gt;</code> option. <code>&lt;number&gt;</code> is the number of cores you allow parallel
to use concurrently.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>parallel<span class="w"> </span>--verbose<span class="w"> </span>--jobs<span class="w"> </span><span class="m">3</span><span class="w"> </span>dcm2bids<span class="w"> </span><span class="o">[</span>...<span class="o">]</span>
</code></pre></div></td></tr></table></div>
<h3 id="verifying-the-logs">Verifying the logs<a class="headerlink" href="#verifying-the-logs" title="Permanent link">âš“ï¸Ž</a></h3>
<p>Once all the participants have been converted, it is a good thing to analyze the
dcm2bids logs inside the <code>tmp_dcm2bids/log/</code>. They all follow the same pattern,
so it is easy to <code>grep</code> for specific error or warning messages.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>grep<span class="w"> </span>-ri<span class="w"> </span><span class="s2">&quot;error&quot;</span><span class="w"> </span>tmp_dcm2bids/log/
grep<span class="w"> </span>-ri<span class="w"> </span><span class="s2">&quot;warning&quot;</span><span class="w"> </span>tmp_dcm2bids/log/
</code></pre></div></td></tr></table></div>

  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class="timeago" datetime="2023-09-13T20:08:58+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2023-09-13</span>
      
        <br>
        Created:
        <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class="timeago" datetime="2023-09-13T19:07:39+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2023-09-13</span>
      
    
  </small>
</div>





                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../first-steps/" class="md-footer__link md-footer__link--prev" aria-label="Previous: First steps" rel="prev">
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                First steps
              </div>
            </div>
          </a>
        
        
          
          <a href="../../how-to/" class="md-footer__link md-footer__link--next" aria-label="Next: index" rel="next">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                index
              </div>
            </div>
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://github.com/UNFmontreal/Dcm2Bids" target="_blank" rel="noopener" title="dcm2bids on GitHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://hub.docker.com/r/unfmontreal/dcm2bids" target="_blank" rel="noopener" title="dcm2bids on docker" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1v59.4zm0-204.3h-66.1v60.7h66.1V32zm78.2 144.8H362v59.4h66.1v-59.4zm-156.3-72.1h-66.1v60.1h66.1v-60.1zm78.1 0h-66.1v60.1h66.1v-60.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1l-13.3-8.9zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm-78.1-72.1h-66.1v60.1h66.1v-60.1z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.tooltips", "navigation.footer", "navigation.indexes", "navigation.sections", "navigation.top", "navigation.tracking", "search.highlight", "search.suggest", "toc.follow"], "search": "../../assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"alias_type": "symlink", "canonical_version": "latest", "default": "latest", "provider": "mike", "redirect_template": null, "version_selector": true}}</script>
    
    
      <script src="../../assets/javascripts/bundle.220ee61c.min.js"></script>
      
        
          <script src="../../js/timeago.min.js"></script>
        
      
        
          <script src="../../js/timeago_mkdocs_material.js"></script>
        
      
    
  </body>
</html>